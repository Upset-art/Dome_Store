<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DomÃ¨ Studios â€” Admin Dashboard</title>
<link rel="icon" href="/favicon.svg" type="image/svg+xml" />
<style>
:root{
  --bg:#0b0b0c; --card:#121214; --ink:#eaeaea; --muted:#a7a7ad; --brand:#79ffa8; --accent:#b3e5ff; --danger:#ff7b7b;
  --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.25);
}
*{box-sizing:border-box}
html,body{margin:0; padding:0; background:var(--bg); color:var(--ink); font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;}
a{color:var(--accent); text-decoration:none}
a:hover{text-decoration:underline}
.wrap{max-width:960px; margin-inline:auto; padding:24px}
header{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:16px 0}
.logo{display:flex; align-items:center; gap:12px; font-weight:700; letter-spacing:.3px}
.logo-badge{width:36px; height:36px; border-radius:12px; background:linear-gradient(135deg,var(--brand),#2de2ff); display:grid; place-items:center; color:#0b0b0c; font-weight:800}
.nav a{opacity:.9; margin-left:14px}
.btn{display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:12px 16px; border-radius:12px; border:1px solid #2a2a2e; background:#151518; color:var(--ink); box-shadow:var(--shadow); cursor:pointer}
.btn-primary{background:linear-gradient(135deg,var(--brand),#2de2ff); color:#0b0b0c; font-weight:800}
.btn-ghost{background:transparent; border:1px solid #2a2a2e}
.grid{display:grid; gap:18px}
@media(min-width:760px){.grid-2{grid-template-columns:1fr 1fr}}
.card{background:var(--card); border:1px solid #2a2a2e; border-radius:var(--radius); padding:18px}
.muted{color:var(--muted)}
h1{font-size:clamp(28px,5vw,44px); line-height:1.06; margin:8px 0 10px}
h2{font-size:clamp(22px,3.5vw,28px); margin:0 0 8px}
h3{margin:0 0 6px}
input,select,textarea{width:100%; background:#0e0e10; color:var(--ink); border:1px solid #2a2a2e; border-radius:12px; padding:12px}
label{font-size:14px; color:var(--muted)}
.row{display:grid; gap:12px; margin-bottom:12px}
.row-2{grid-template-columns:1fr 1fr}
.footer{opacity:.7; font-size:14px; padding:24px 0; border-top:1px solid #232327; margin-top:28px}
.product-card{display:flex; justify-content:space-between; align-items:center; gap:10px}
.product-info{flex:1}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="logo">
      <div class="logo-badge">D</div>
      <div>DomÃ¨ Studios</div>
    </div>
  </header>

  <section class="section card">
    <h2>Ajouter un produit</h2>
    <form id="add-product-form">
      <div class="row">
        <label for="title">Titre</label>
        <input id="title" required />
      </div>
      <div class="row">
        <label for="type">Type</label>
        <select id="type" required>
          <option value="Template">Template</option>
          <option value="eBook">eBook</option>
          <option value="Autre">Autre</option>
        </select>
      </div>
      <div class="row">
        <label for="price">Prix (FCFA)</label>
        <input id="price" type="number" required />
      </div>
      <div class="row">
        <label for="desc">Description</label>
        <textarea id="desc" rows="3"></textarea>
      </div>
      <div class="row">
        <label for="badge">Badge (optionnel)</label>
        <input id="badge" placeholder="Ex: Nouveau, Populaireâ€¦" />
      </div>
      <button type="submit" class="btn btn-primary">Ajouter le produit</button>
    </form>
  </section>

  <section class="section">
    <h2>Produits existants</h2>
    <div id="products-list" class="grid"></div>
  </section>

  <footer class="footer">
    <div class="muted">Â© <span id="year"></span> DomÃ¨ Studios â€” Admin local / Firestore</div>
  </footer>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script>
  // ðŸ”¹ CONFIG FIREBASE
const firebaseConfig = {
  apiKey: "AIzaSyC8FfqTeGIKLC1nJtfQH8suODFdH0kXn_E",
  authDomain: "domestudios-58fa7.firebaseapp.com",
  projectId: "domestudios-58fa7",
  storageBucket: "domestudios-58fa7.firebasestorage.app",
  messagingSenderId: "616147386743",
  appId: "1:616147386743:web:c940897c0f24aea2012172",
  measurementId: "G-5JFZJ8TC33"
};
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // ðŸ”¹ Afficher produits
  const productsList = document.getElementById('products-list');
  function renderProduct(doc){
    const div = document.createElement('div');
    div.className = 'card product-card';
    div.innerHTML = `
      <div class="product-info">
        <strong>${doc.data().title}</strong> â€” ${doc.data().type} â€” ${doc.data().price.toLocaleString()} FCFA
        <div class="muted">${doc.data().desc || ''} <span class="badge">${doc.data().badge || ''}</span></div>
      </div>
      <button class="btn btn-ghost btn-delete" data-id="${doc.id}">Supprimer</button>
    `;
    productsList.appendChild(div);

    div.querySelector('.btn-delete').onclick = ()=>{
      if(confirm('Supprimer ce produit ?')){
        db.collection('products').doc(doc.id).delete();
      }
    }
  }

  // ðŸ”¹ Load produits en direct
  db.collection('products').orderBy('title').onSnapshot(snapshot=>{
    productsList.innerHTML='';
    snapshot.forEach(doc=>renderProduct(doc));
  });

  // ðŸ”¹ Ajouter produit
  document.getElementById('add-product-form').addEventListener('submit', e=>{
    e.preventDefault();
    const title = document.getElementById('title').value;
    const type = document.getElementById('type').value;
    const price = parseInt(document.getElementById('price').value);
    const desc = document.getElementById('desc').value;
    const badge = document.getElementById('badge').value;
    db.collection('products').add({title,type,price,desc,badge})
      .then(()=>e.target.reset())
      .catch(err=>alert('Erreur : '+err));
  });

  // ðŸ”¹ AnnÃ©e dynamique
  document.getElementById('year').textContent = new Date().getFullYear();
</script>
</body>
</html>
